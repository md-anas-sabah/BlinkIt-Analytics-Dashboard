import React, { useState } from "react";
// import Image from "next/image";

interface NavItem {
  id: string;
  name: string;
  icon: React.ReactNode;
  subItems?: NavItem[];
  isOpen?: boolean;
}

const Sidebar: React.FC = () => {
  const [navItems, setNavItems] = useState<NavItem[]>([
    {
      id: "overview",
      name: "Overview",
      icon: (
        <svg
          width="19"
          height="17"
          viewBox="0 0 19 17"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M18.2574 15.25H17.0074V9.625L17.1903 9.80781C17.3077 9.92509 17.467 9.99089 17.633 9.99074C17.799 9.9906 17.9581 9.92451 18.0754 9.80703C18.1927 9.68955 18.2585 9.53029 18.2583 9.36429C18.2582 9.19829 18.1921 9.03915 18.0746 8.92188L10.391 1.24062C10.1566 1.00638 9.83883 0.874798 9.50745 0.874798C9.17607 0.874798 8.85825 1.00638 8.62385 1.24062L0.940259 8.92188C0.823087 9.03915 0.757302 9.19817 0.757375 9.36395C0.757448 9.52973 0.823374 9.68869 0.940649 9.80586C1.05792 9.92303 1.21694 9.98882 1.38272 9.98874C1.5485 9.98867 1.70746 9.92274 1.82463 9.80547L2.00745 9.625V15.25H0.757446C0.591686 15.25 0.432715 15.3158 0.315505 15.4331C0.198294 15.5503 0.132446 15.7092 0.132446 15.875C0.132446 16.0408 0.198294 16.1997 0.315505 16.3169C0.432715 16.4342 0.591686 16.5 0.757446 16.5H18.2574C18.4232 16.5 18.5822 16.4342 18.6994 16.3169C18.8166 16.1997 18.8824 16.0408 18.8824 15.875C18.8824 15.7092 18.8166 15.5503 18.6994 15.4331C18.5822 15.3158 18.4232 15.25 18.2574 15.25ZM3.25745 8.375L9.50745 2.125L15.7574 8.375V15.25H12.0074V10.875C12.0074 10.7092 11.9416 10.5503 11.8244 10.4331C11.7072 10.3158 11.5482 10.25 11.3824 10.25H7.63245C7.46669 10.25 7.30771 10.3158 7.1905 10.4331C7.07329 10.5503 7.00745 10.7092 7.00745 10.875V15.25H3.25745V8.375ZM10.7574 15.25H8.25745V11.5H10.7574V15.25Z"
            fill="#7E8986"
          />
        </svg>
      ),
    },
    {
      id: "channels",
      name: "Channels",
      icon: (
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.3824 3.125H11.1324V1.875C11.1324 1.70924 11.0666 1.55027 10.9494 1.43306C10.8322 1.31585 10.6732 1.25 10.5074 1.25C10.3417 1.25 10.1827 1.31585 10.0655 1.43306C9.94829 1.55027 9.88245 1.70924 9.88245 1.875V3.125H3.63245C3.30093 3.125 2.98298 3.2567 2.74856 3.49112C2.51414 3.72554 2.38245 4.04348 2.38245 4.375V13.75C2.38245 14.0815 2.51414 14.3995 2.74856 14.6339C2.98298 14.8683 3.30093 15 3.63245 15H6.70745L5.01917 17.1094C4.91556 17.2389 4.86765 17.4042 4.88597 17.5691C4.90428 17.7339 4.98732 17.8847 5.11682 17.9883C5.24632 18.0919 5.41167 18.1398 5.5765 18.1215C5.74133 18.1032 5.89213 18.0201 5.99573 17.8906L8.30745 15H12.7074L15.0192 17.8906C15.0705 17.9547 15.1339 18.0081 15.2058 18.0477C15.2778 18.0874 15.3568 18.1124 15.4384 18.1215C15.52 18.1306 15.6026 18.1235 15.6815 18.1006C15.7604 18.0777 15.8339 18.0396 15.8981 17.9883C15.9622 17.937 16.0156 17.8736 16.0552 17.8016C16.0948 17.7297 16.1199 17.6507 16.1289 17.5691C16.138 17.4874 16.1309 17.4048 16.108 17.326C16.0852 17.2471 16.047 17.1735 15.9957 17.1094L14.3074 15H17.3824C17.714 15 18.0319 14.8683 18.2663 14.6339C18.5007 14.3995 18.6324 14.0815 18.6324 13.75V4.375C18.6324 4.04348 18.5007 3.72554 18.2663 3.49112C18.0319 3.2567 17.714 3.125 17.3824 3.125ZM17.3824 13.75H3.63245V4.375H17.3824V13.75ZM8.63245 9.375V11.25C8.63245 11.4158 8.5666 11.5747 8.44939 11.6919C8.33218 11.8092 8.17321 11.875 8.00745 11.875C7.84169 11.875 7.68271 11.8092 7.5655 11.6919C7.44829 11.5747 7.38245 11.4158 7.38245 11.25V9.375C7.38245 9.20924 7.44829 9.05027 7.5655 8.93306C7.68271 8.81585 7.84169 8.75 8.00745 8.75C8.17321 8.75 8.33218 8.81585 8.44939 8.93306C8.5666 9.05027 8.63245 9.20924 8.63245 9.375ZM11.1324 8.125V11.25C11.1324 11.4158 11.0666 11.5747 10.9494 11.6919C10.8322 11.8092 10.6732 11.875 10.5074 11.875C10.3417 11.875 10.1827 11.8092 10.0655 11.6919C9.94829 11.5747 9.88245 11.4158 9.88245 11.25V8.125C9.88245 7.95924 9.94829 7.80027 10.0655 7.68306C10.1827 7.56585 10.3417 7.5 10.5074 7.5C10.6732 7.5 10.8322 7.56585 10.9494 7.68306C11.0666 7.80027 11.1324 7.95924 11.1324 8.125ZM13.6324 6.875V11.25C13.6324 11.4158 13.5666 11.5747 13.4494 11.6919C13.3322 11.8092 13.1732 11.875 13.0074 11.875C12.8417 11.875 12.6827 11.8092 12.5655 11.6919C12.4483 11.5747 12.3824 11.4158 12.3824 11.25V6.875C12.3824 6.70924 12.4483 6.55027 12.5655 6.43306C12.6827 6.31585 12.8417 6.25 13.0074 6.25C13.1732 6.25 13.3322 6.31585 13.4494 6.43306C13.5666 6.55027 13.6324 6.70924 13.6324 6.875Z"
            fill="#7E8986"
          />
        </svg>
      ),
      isOpen: true,
      subItems: [
        {
          id: "meta-ads",
          name: "Meta Ads",
          icon: null,
        },
        {
          id: "google-ads",
          name: "Google Ads",
          icon: null,
        },
        {
          id: "quick-commerce",
          name: "Quick Commerce",
          icon: null,
        },
      ],
    },
    {
      id: "creatives",
      name: "Creatives",
      icon: (
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16.7574 2.5H6.75745C6.42593 2.5 6.10798 2.6317 5.87356 2.86612C5.63914 3.10054 5.50745 3.41848 5.50745 3.75V5H4.25745C3.92593 5 3.60798 5.1317 3.37356 5.36612C3.13914 5.60054 3.00745 5.91848 3.00745 6.25V16.25C3.00745 16.5815 3.13914 16.8995 3.37356 17.1339C3.60798 17.3683 3.92593 17.5 4.25745 17.5H14.2574C14.589 17.5 14.9069 17.3683 15.1413 17.1339C15.3757 16.8995 15.5074 16.5815 15.5074 16.25V15H16.7574C17.089 15 17.4069 14.8683 17.6413 14.6339C17.8757 14.3995 18.0074 14.0815 18.0074 13.75V3.75C18.0074 3.41848 17.8757 3.10054 17.6413 2.86612C17.4069 2.6317 17.089 2.5 16.7574 2.5ZM6.75745 3.75H16.7574V9.17031L15.4528 7.86562C15.2184 7.63138 14.9005 7.4998 14.5692 7.4998C14.2378 7.4998 13.92 7.63138 13.6856 7.86562L7.80198 13.75H6.75745V3.75ZM14.2574 16.25H4.25745V6.25H5.50745V13.75C5.50745 14.0815 5.63914 14.3995 5.87356 14.6339C6.10798 14.8683 6.42593 15 6.75745 15H14.2574V16.25ZM16.7574 13.75H9.56995L14.5699 8.75L16.7574 10.9375V13.75ZM9.88245 8.75C10.2533 8.75 10.6158 8.64003 10.9241 8.43401C11.2325 8.22798 11.4728 7.93514 11.6147 7.59253C11.7566 7.24992 11.7938 6.87292 11.7214 6.50921C11.6491 6.14549 11.4705 5.8114 11.2083 5.54917C10.946 5.28695 10.612 5.10837 10.2482 5.03603C9.88453 4.96368 9.50753 5.00081 9.16492 5.14273C8.8223 5.28464 8.52947 5.52496 8.32344 5.83331C8.11741 6.14165 8.00745 6.50416 8.00745 6.875C8.00745 7.37228 8.20499 7.84919 8.55662 8.20083C8.90825 8.55246 9.38517 8.75 9.88245 8.75ZM9.88245 6.25C10.0061 6.25 10.1269 6.28666 10.2297 6.35533C10.3325 6.42401 10.4126 6.52162 10.4599 6.63582C10.5072 6.75003 10.5196 6.87569 10.4954 6.99693C10.4713 7.11817 10.4118 7.22953 10.3244 7.31694C10.237 7.40435 10.1256 7.46388 10.0044 7.48799C9.88314 7.51211 9.75747 7.49973 9.64327 7.45243C9.52907 7.40512 9.43145 7.32501 9.36278 7.22223C9.2941 7.11945 9.25745 6.99861 9.25745 6.875C9.25745 6.70924 9.32329 6.55027 9.4405 6.43306C9.55771 6.31585 9.71669 6.25 9.88245 6.25Z"
            fill="#7E8986"
          />
        </svg>
      ),
    },
  ]);

  const toggleSubItems = (id: string) => {
    setNavItems((items) =>
      items.map((item) =>
        item.id === id ? { ...item, isOpen: !item.isOpen } : item
      )
    );
  };

  return (
    <div className="h-screen w-[220px] bg-white border-r border-gray-200 flex flex-col">
      <div className="h-16 border-b border-gray-200 flex items-center px-4">
        <div className="flex-1">
          <div className="flex items-center border-1 rounded-[10px] border-[#D9D9D9] px-3  py-1">
            <div className="w-6 h-6 overflow-hidden bg-[#309E96] rounded-[7px] mr-3 flex items-center justify-center">
              <span className="text-xs font-bold text-white">SS</span>
            </div>
            <div className="flex flex-1 items-center justify-between">
              <span className="text-sm">Test_brand</span>
              <svg
                width="8"
                height="14"
                viewBox="0 0 8 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.73647 9.64664C7.78296 9.69308 7.81984 9.74822 7.845 9.80892C7.87017 9.86962 7.88312 9.93468 7.88312 10.0004C7.88312 10.0661 7.87017 10.1312 7.845 10.1919C7.81984 10.2526 7.78296 10.3077 7.73647 10.3541L4.73647 13.3541C4.69004 13.4006 4.63489 13.4375 4.57419 13.4627C4.5135 13.4878 4.44843 13.5008 4.38272 13.5008C4.31702 13.5008 4.25195 13.4878 4.19125 13.4627C4.13056 13.4375 4.07541 13.4006 4.02897 13.3541L1.02897 10.3541C0.935154 10.2603 0.882446 10.1331 0.882446 10.0004C0.882446 9.86771 0.935154 9.74046 1.02897 9.64664C1.12279 9.55282 1.25004 9.50011 1.38272 9.50011C1.51541 9.50011 1.64265 9.55282 1.73647 9.64664L4.38272 12.2935L7.02897 9.64664C7.07541 9.60015 7.13056 9.56327 7.19125 9.53811C7.25195 9.51295 7.31702 9.5 7.38272 9.5C7.44843 9.5 7.5135 9.51295 7.57419 9.53811C7.63489 9.56327 7.69004 9.60015 7.73647 9.64664ZM1.73647 4.35414L4.38272 1.70727L7.02897 4.35414C7.12279 4.44796 7.25004 4.50067 7.38272 4.50067C7.51541 4.50067 7.64265 4.44796 7.73647 4.35414C7.83029 4.26032 7.883 4.13308 7.883 4.00039C7.883 3.86771 7.83029 3.74046 7.73647 3.64664L4.73647 0.646643C4.69004 0.600155 4.63489 0.563276 4.57419 0.538113C4.5135 0.512951 4.44843 0.5 4.38272 0.5C4.31702 0.5 4.25195 0.512951 4.19125 0.538113C4.13056 0.563276 4.07541 0.600155 4.02897 0.646643L1.02897 3.64664C0.935154 3.74046 0.882446 3.86771 0.882446 4.00039C0.882446 4.13308 0.935154 4.26032 1.02897 4.35414C1.12279 4.44796 1.25004 4.50067 1.38272 4.50067C1.51541 4.50067 1.64265 4.44796 1.73647 4.35414Z"
                  fill="#031B15"
                />
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div className="flex-1 overflow-y-auto">
        <ul className="py-2">
          {navItems.map((item) => (
            <li key={item.id} className="mb-1">
              <div
                className={`flex items-center px-4 py-2 text-sm cursor-pointer ${
                  item.id === "channels"
                    ? "bg-gray-100 text-gray-900"
                    : "text-gray-600 hover:bg-gray-50"
                }`}
                onClick={() => item.subItems && toggleSubItems(item.id)}
              >
                <span className="mr-3">{item.icon}</span>
                <span className="font-normal text-[#031B15] ">{item.name}</span>
                {item.subItems && (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    className={`ml-auto transform ${
                      item.isOpen ? "rotate-90" : ""
                    }`}
                  >
                    <polyline points="9 18 15 12 9 6" />
                  </svg>
                )}
              </div>

              {item.isOpen && item.subItems && (
                <ul className="pl-9 mt-1">
                  {item.subItems.map((subItem) => (
                    <li
                      key={subItem.id}
                      className={`
                        px-4 py-2 text-sm cursor-pointer
                        ${
                          subItem.id === "quick-commerce"
                            ? "text-green-700 bg-green-50 font-medium"
                            : "text-gray-600 hover:bg-gray-50"
                        }
                      `}
                    >
                      {subItem.name}
                    </li>
                  ))}
                </ul>
              )}
            </li>
          ))}
        </ul>
      </div>

      <div className="mt-auto">
        <div className="border-t border-gray-200 py-2">
          <ul>
            <li className="px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 cursor-pointer flex items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className="mr-3"
              >
                <circle cx="12" cy="12" r="10" />
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                <line x1="12" y1="17" x2="12.01" y2="17" />
              </svg>
              <span>Help</span>
            </li>
            <li className="px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 cursor-pointer flex items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className="mr-3"
              >
                <circle cx="12" cy="12" r="3" />
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
              </svg>
              <span>Settings</span>
            </li>
          </ul>
        </div>
        <div className="px-4 py-3 flex items-center border-t border-gray-200">
          <div className="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
            HK
          </div>
          <div className="ml-2">
            <div className="text-xs text-gray-500">Logged in as</div>
            <div className="text-sm font-medium">Humnashin Khan</div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Sidebar;
